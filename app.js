// 馬データ（自動生成）
const horsesData = {
  "アグネスタキオン": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "エリモピクシー",
        "名馬スキル": "逆襲"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "オースミハルカ",
        "名馬スキル": "逃亡者"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "スカーレットブーケ",
        "名馬スキル": "真紅の輝き(逃亡者)"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ビワハイジ",
        "名馬スキル": "勝負根性アップ"
      }
    ]
  },
  "アグネスデジタル": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ヤマニンアリーナ",
        "名馬スキル": "気性アップ"
      }
    ]
  },
  "アグネスワールド": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "カズサグリッター",
        "名馬スキル": "勝負根性アップ"
      }
    ]
  },
  "エピファネイア": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "デアリングバード",
        "名馬スキル": "トリプルティアラ"
      }
    ]
  },
  "エルコンドルパサー": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "メモリアルサマー",
        "名馬スキル": "レース速度アップ"
      }
    ]
  },
  "エンドスウィープ": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "タバサトウショウ",
        "名馬スキル": "激情の箒星(逆襲)"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "マイケイティーズ",
        "名馬スキル": "世界の夜を照らす月(最終直線速度)"
      }
    ]
  },
  "オペラハウス": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ロイヤルバイオ",
        "名馬スキル": "勝負根性アップ"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "ワンスウエド",
        "名馬スキル": "王者の歩み(終盤から400mまで目標速度アップ)"
      }
    ]
  },
  "オルフェーヴル": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "ダイワパッション",
        "名馬スキル": "ギアチェンジ"
      }
    ]
  },
  "キタサンブラック": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ナターレ",
        "名馬スキル": "勝負根性アップ"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "ライジングクロス",
        "名馬スキル": "北十字星の輝き(スピードと根性がより大きくアップ)"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "ラキア",
        "名馬スキル": "スタミナアップ"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "チェストケローズ",
        "名馬スキル": "直線一気"
      }
    ]
  },
  "キングカメハメハ": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "エアグルーヴ",
        "名馬スキル": "良血のドラ息子(上がり速度)"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "サクラメガ",
        "名馬スキル": "反骨心"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "トゥザヴィクトリー",
        "名馬スキル": "上がり速度"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "ポップコーンジャズ",
        "名馬スキル": "抜け出し"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ムードインディゴ",
        "名馬スキル": "息を入れる"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ハンドレッドスコア",
        "名馬スキル": null
      }
    ]
  },
  "キングヘイロー": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "タカノセクレタリー",
        "名馬スキル": "ペースアップ"
      }
    ]
  },
  "グラスワンダー": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "サクラメガ",
        "名馬スキル": "直線一気"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "チェリーラブ",
        "名馬スキル": null
      },
      {
        "名馬配合ランク": "2",
        "母馬": "ランニングヒロイン",
        "名馬スキル": "最終直線持続"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "レットルダムール",
        "名馬スキル": "対抗意識"
      }
    ]
  },
  "クロフネ": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "グローバルピース",
        "名馬スキル": "追い上げ"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "クラシカルテースト",
        "名馬スキル": "追い上げ"
      }
    ]
  },
  "サクラバクシンオー": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "ショウナングレイス",
        "名馬スキル": "対抗意識"
      }
    ]
  },
  "サクラローレル": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "サクラヒラメキ",
        "名馬スキル": "ラストスパート"
      }
    ]
  },
  "サンデーサイレンス": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "エアグルーヴ",
        "名馬スキル": "良血の令嬢(ラストスパート)"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "グレースアドマイヤ",
        "名馬スキル": "息を入れる"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ジョウノマチエール",
        "名馬スキル": "追い上げ"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "スカーレットブーケ",
        "名馬スキル": "才能と努力の結実(上がり速度)"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "トウカイナチュラル",
        "名馬スキル": "気性アップ"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "バレークイーン",
        "名馬スキル": "掛かり軽減"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ビワハイジ",
        "名馬スキル": "距離延長適正"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "ベガ",
        "名馬スキル": "最終直線速度"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ホワイトウォーターアフェア",
        "名馬スキル": "追い上げ"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "ロンドンブリッチ",
        "名馬スキル": "先手必勝"
      }
    ]
  },
  "シャルード": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "パシフィカス",
        "名馬スキル": "スピードセンス(上がり速度)"
      }
    ]
  },
  "シングスピール": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "カーリング",
        "名馬スキル": "スタート巧者"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "ホワイトウォーターアフェア",
        "名馬スキル": "ラストスパート"
      }
    ]
  },
  "シンボリルドルフ": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "トウカイナチュラル",
        "名馬スキル": "奇跡の帝王(ラストスパート)"
      }
    ]
  },
  "スペシャルウィーク": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "ビワハイジ",
        "名馬スキル": "素晴らしい景色(オールアップ6　絶大アップ)"
      }
    ]
  },
  "ゼンノロブロイ": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ビワハイジ",
        "名馬スキル": "ラストスパート"
      }
    ]
  },
  "タニノギムレット": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "アゲヒバリ",
        "名馬スキル": "加速アップ"
      }
    ]
  },
  "ダンシングキャップ": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "ホワイトナルビー",
        "名馬スキル": "芦毛の怪物(体重デバフ軽減、根性アップ)"
      }
    ]
  },
  "ダンシングブレーヴ": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "インターシャルマン",
        "名馬スキル": "先手必勝"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "リヴァーガール",
        "名馬スキル": "スピード自慢の少女(追い上げ)"
      }
    ]
  },
  "ダンスインザダーク": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "エアグルーヴ",
        "名馬スキル": "スタミナアップ"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "エリモピクシー",
        "名馬スキル": "上がり速度"
      }
    ]
  },
  "ティンバーカントリー": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "ベガ",
        "名馬スキル": "スピードアップダート"
      }
    ]
  },
  "ドゥラメンテ": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ダイワパッション",
        "名馬スキル": null
      },
      {
        "名馬配合ランク": "3",
        "母馬": "ヤンキーローズ",
        "名馬スキル": "華麗なお嬢さん(最終直線速度　絶大アップ)"
      }
    ]
  },
  "トニービン": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "シンコウラブリイ",
        "名馬スキル": "重馬場巧者、芝"
      }
    ]
  },
  "ネオユニヴァース": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "バレークイーン",
        "名馬スキル": "最終直線速度"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "ホワイトウォーターアフェア",
        "名馬スキル": "希望の光(最終直線持続)"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ロイヤルペルラ",
        "名馬スキル": "対抗意識"
      }
    ]
  },
  "Greendesert": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "Parkexpress",
        "名馬スキル": "ペースアップ"
      }
    ]
  },
  "バゴ": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "タニノジャドール",
        "名馬スキル": "勝負根性アップ"
      }
    ]
  },
  "バトルプラン": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ウーマンインレッド",
        "名馬スキル": "逃亡者"
      }
    ]
  },
  "フォーティナイナー": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "シーズグレイス",
        "名馬スキル": "スタート巧者"
      }
    ]
  },
  "ブライアンズタイム": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "キャットクイル",
        "名馬スキル": "胡蝶蘭の夢(追い上げ)"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "グレースアドマイヤ",
        "名馬スキル": "逃亡者"
      },
      {
        "名馬配合ランク": "3",
        "母馬": "パシフィカス",
        "名馬スキル": "シャドーロールの怪物(オールアップ3)"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ファンドリパール",
        "名馬スキル": "底力"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ロンドンブリッジ",
        "名馬スキル": "スタート巧者"
      }
    ]
  },
  "ブレイヴェストローマン": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "ホワイトナルビー",
        "名馬スキル": "上がり速度アップ"
      }
    ]
  },
  "ホスピタリティ": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ファンドリパール",
        "名馬スキル": "最終直線持続"
      }
    ]
  },
  "マグニテュード": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "ローズエントリー",
        "名馬スキル": "先手必勝"
      }
    ]
  },
  "マンハッタンカフェ": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ロイヤルペルラ",
        "名馬スキル": "底力"
      }
    ]
  },
  "メジロティターン": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "メジロオーロラ",
        "名馬スキル": "メジロの系譜(先手必勝　絶大アップ)"
      }
    ]
  },
  "モーリス": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "ジェンティルドンナ",
        "名馬スキル": "先駆け"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "ラヴァリーノ",
        "名馬スキル": "スタート巧者"
      },
      {
        "名馬配合ランク": "1",
        "母馬": "ジュベルアリ",
        "名馬スキル": "ラストスパート"
      }
    ]
  },
  "ヨハネスブルグ": {
    "combinations": [
      {
        "名馬配合ランク": "1",
        "母馬": "ホウライサンデー",
        "名馬スキル": "加速アップ"
      }
    ]
  },
  "リアルスティール": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "フォエヴァーダーリング",
        "名馬スキル": "世界を制した日本代表(最終直線速度+持続)"
      }
    ]
  },
  "ロードカナロア": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "フサイチパンドラ",
        "名馬スキル": "瞳に夢を(オールアップ6 絶大アップ)"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "インナーアージ",
        "名馬スキル": "芝適性アップ"
      },
      {
        "名馬配合ランク": "2",
        "母馬": "レキシールー",
        "名馬スキル": null
      }
    ]
  },
  "Cearleon": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "バレークイーン",
        "名馬スキル": "加速アップ"
      }
    ]
  },
  "Green Desert": {
    "combinations": [
      {
        "名馬配合ランク": "2",
        "母馬": "Park Express",
        "名馬スキル": "ペースアップ"
      }
    ]
  },
  "LemonDropKid": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "Untouchable",
        "名馬スキル": "夢載せる重戦車(スピ、スタ、根性アップ)"
      }
    ]
  },
  "Polish precedent": {
    "combinations": [
      {
        "名馬配合ランク": "3",
        "母馬": "Cocotte",
        "名馬スキル": "世界を駆ける宰相(最終直線持続)"
      }
    ]
  }
};

// 検索機能
function searchHorse() {
  const input = document.getElementById("searchInput").value.trim();
  const resultDiv = document.getElementById("result");

  if (!input) {
    resultDiv.innerHTML = "<p>馬名を入力してください</p>";
    return;
  }

  // 部分一致検索
  const matches = Object.keys(horsesData).filter(name =>
    name.includes(input)
  );

  if (matches.length === 0) {
    resultDiv.innerHTML = "<p>該当する馬が見つかりません</p>";
    return;
  }

  // 1件のみヒット → 詳細表示
  if (matches.length === 1) {
    showHorseDetail(matches[0]);
    return;
  }

  // 複数ヒット → 候補表示
  let html = "<h3>候補</h3><ul>";
  matches.forEach(name => {
    html += `<li><span class="horse-name" onclick="selectHorse('${name}')">${name}</span></li>`;
  });
  html += "</ul>";
  resultDiv.innerHTML = html;
}

// 候補から馬を選択
function selectHorse(name) {
  document.getElementById("searchInput").value = name;
  showHorseDetail(name);
}

// 馬の詳細表示
function showHorseDetail(name) {
  const horse = horsesData[name];
  const resultDiv = document.getElementById("result");

  if (!horse) {
    resultDiv.innerHTML = `
      <h2>${name}</h2>
      <p style="color:red">この馬の配合情報はまだ登録されていません</p>
    `;
    return;
  }

  let html = `<h2>${name}</h2>`;
  html += "<h3>配合・スキル一覧</h3>";

  horse.combinations.forEach(combo => {
    html += `
      <div class="combination-item">
        <div>配合ランク：<span class="rank">${combo["名馬配合ランク"]}</span></div>
        <div>母馬：<span class="horse-name" onclick="selectHorse('${combo["母馬"]}')">${combo["母馬"]}</span></div>
        <div>スキル：<span class="skill">${combo["名馬スキル"]}</span></div>
      </div>
    `;
  });

  resultDiv.innerHTML = html;
}

// Enterキーでも検索できるように
document.getElementById("searchInput").addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    searchHorse();
  }
});
